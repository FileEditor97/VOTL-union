plugins {
	id 'java'
	// ShadowJar
	id 'com.github.johnrengelman.shadow' version '8.1.1'
}

// Getting version
apply from: 'version.gradle'

def version = loadVersion().getVersion()
def group = 'union.App'

repositories {
	// Use Maven Central for resolving dependencies.
	mavenCentral()
	// JDA-Chewtils SNAPSHOTs
	maven {
		url 'https://m2.chew.pro/snapshots/'
	}
	maven {
		url 'https://jitpack.io'
	}
}

dependencies {
	// JDA library
	// https://mvnrepository.com/artifact/net.dv8tion/JDA
	implementation 'net.dv8tion:JDA:5.0.0-beta.18'					// JDA library
	// https://mvnrepository.com/artifact/ch.qos.logback/logback-classic
	implementation 'ch.qos.logback:logback-classic:1.4.11'			// Logging (required by JDA)
	// https://mvnrepository.com/artifact/jakarta.annotation/jakarta.annotation-api
	implementation 'jakarta.annotation:jakarta.annotation-api:3.0.0-M1'

	// Tools
	// https://mvnrepository.com/artifact/com.jayway.jsonpath/json-path
	implementation 'com.jayway.jsonpath:json-path:2.8.0'			// json path-er
	// https://mvnrepository.com/artifact/org.xerial/sqlite-jdbc
	implementation 'org.xerial:sqlite-jdbc:3.44.0.0'				// sqlite database
	// https://mvnrepository.com/artifact/com.mysql/mysql-connector-j
	implementation 'com.mysql:mysql-connector-j:8.2.0'				// mysql database (Union)
	// https://mvnrepository.com/artifact/org.jsoup/jsoup
	implementation 'org.jsoup:jsoup:1.16.2'							// HTML tools

	// Eval
	// https://mvnrepository.com/artifact/org.apache.groovy/groovy
	implementation 'org.apache.groovy:groovy:4.0.15'				// Groovy - code evaluation

	// Chewtils commands
	// https://mvnrepository.com/artifact/org.json/json
	implementation 'org.json:json:20231013'
}

// Changes builded libraries directory from 'libs' to 'lib'
sourceSets {
	libsDirName = 'lib'
}

javadoc {
	options.tags = ['implNote:a:Implementation Note:']
}

// jar's Manifest
jar {
	manifest {
		attributes 'Implementation-Title': 'VOTL bot',
				   'Implementation-Version': version,
				   'Implementation-Vendor': 'FiLe group',
				   'Main-Class': group
	}
}

// ShadowJar
shadowJar {
	archiveBaseName.set('VOTL')
	archiveVersion.set(version)
	archiveClassifier.set('')
}

compileJava.options.encoding = 'UTF-8'
