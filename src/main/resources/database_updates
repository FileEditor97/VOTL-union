ALTER TABLE "guild" DROP "language";DROP TABLE "modAccess";CREATE TABLE "modAccess" ("roleId" TEXT NOT NULL, "guildId" TEXT NOT NULL, FOREIGN KEY("guildId") REFERENCES "guild"("guildId"))
ALTER TABLE "verify" DROP "verificationLink";ALTER TABLE "verify" DROP "instructionField";ALTER TABLE "verify" RENAME "panelText" TO "mainText"
ALTER TABLE "guild" ADD "ticketLogId" TEXT;CREATE TABLE "ticketPanel" ("guildId" TEXT NOT NULL, "panelColor" TEXT DEFAULT "0x112E51", FOREIGN KEY("guildId") REFERENCES "guild"("guildId"));CREATE TABLE "requestRole" ("guildId" TEXT NOT NULL, "roleId" TEXT NOT NULL UNIQUE, "description" TEXT, "type" INTEGER NOT NULL DEFAULT 0, FOREIGN KEY("guildId") REFERENCES "guild"("guildId"));CREATE TABLE "ticket" ("ticketId" INTEGER NOT NULL, "guildId" TEXT, "userId" TEXT NOT NULL, "modId" TEXT, "channelId" TEXT, "alias" TEXT NOT NULL, "closed" INTEGER NOT NULL DEFAULT 0, "roleIds" TEXT);CREATE TABLE "ticketType" ("guildId" TEXT NOT NULL, "alias" TEXT NOT NULL, "short" TEXT NOT NULL, "long" TEXT, FOREIGN KEY("guildId") REFERENCES "guild"("guildId"))
ALTER TABLE "ticket" ADD "timeClosed" INTEGER
ALTER TABLE "ticketPanel" DROP "panelColor";ALTER TABLE "verify" DROP "panelColor";ALTER TABLE "guild" ADD "color" TEXT DEFAULT "0x112E51";ALTER TABLE "modAccess" RENAME TO "roleAccess";ALTER TABLE "roleAccess" ADD "level" INTEGER NOT NULL;CREATE TABLE "userAccess" ("guildId" TEXT NOT NULL, "userId" TEXT NOT NULL, "level" INTEGER NOT NULL, FOREIGN KEY("guildId") REFERENCES "guild"("guildId"));DROP TABLE "groupMaster";DROP TABLE "groupSync";CREATE TABLE "groupMaster" ("groupId" INTEGER, "masterId" TEXT NOT NULL, "name" TEXT, "isShared" INTEGER NOT NULL DEFAULT 0, PRIMARY KEY("groupId" AUTOINCREMENT));CREATE TABLE "groupMembers" ("groupId" INTEGER NOT NULL, "guildId" TEXT NOT NULL, "canManage" INTEGER NOT NULL DEFAULT 0, FOREIGN KEY("groupId") REFERENCES "groupMaster"("groupId"))
ALTER TABLE "groupMembers" ADD "whitelisted" INTEGER NOT NULL DEFAULT 0
ALTER TABLE "guild" ADD "lastWebhook" TEXT;ALTER TABLE "guild" ADD "appealLink" TEXT
CREATE TABLE "requestPrepare" ("guildId" TEXT NOT NULL, "userId" TEXT NOT NULL, "expiresAt" INTEGER NOT NULL, "roleIds" TEXT, FOREIGN KEY("guildId") REFERENCES "guild"("guildId"));DELETE FROM "requestRole" WHERE "type"=0;ALTER TABLE "requestRole" ADD "row" INTEGER;ALTER TABLE "ticketPanel" ADD "rowName1" TEXT;ALTER TABLE "ticketPanel" ADD "rowName2" TEXT;ALTER TABLE "ticketPanel" ADD "rowName3" TEXT
DROP TABLE "ticketType";ALTER TABLE "ticketPanel" RENAME TO "ticketSettings";ALTER TABLE "ticket" DROP "alias";ALTER TABLE "ticket" ADD "tagId" INTEGER NOT NULL DEFAULT 0;ALTER TABLE "ticket" ADD "reasonClosed" TEXT;CREATE TABLE "ticketPanel" ("panelId" INTEGER, "guildId" TEXT NOT NULL, "title" TEXT, "description" TEXT, "image" TEXT, "footer" TEXT, FOREIGN KEY("guildId") REFERENCES "guild"("guildId"), PRIMARY KEY("panelId" AUTOINCREMENT));CREATE TABLE "ticketTag" ("tagId" INTEGER, "guildId" TEXT NOT NULL, "panelId" INTEGER NOT NULL, "tagType" INTEGER NOT NULL DEFAULT 1, "buttonText" TEXT, "emoji" TEXT, "location" TEXT, "message" TEXT, "supportRoles" TEXT, "ticketName" TEXT NOT NULL, "buttonStyle" INTEGER, FOREIGN KEY("guildId") REFERENCES "guild"("guildId"), FOREIGN KEY("panelId") REFERENCES "ticketPanel"("panelId"), PRIMARY KEY("tagId" AUTOINCREMENT));ALTER TABLE "ticket" ADD "closeRequested" INTEGER DEFAULT 0;ALTER TABLE "ticketSettings" ADD "autocloseTime" INTEGER NOT NULL DEFAULT 0;ALTER TABLE "ticketSettings" ADD "autocloseLeft" INTEGER NOT NULL DEFAULT 0
ALTER TABLE "guild" ADD "reportChannelId" TEXT;CREATE TABLE "guildVoice" ("guildId" TEXT NOT NULL UNIQUE, "categoryId" TEXT, "channelId" TEXT, "defaultName" TEXT, "defaultLimit" INTEGER DEFAULT 0, FOREIGN KEY("guildId") REFERENCES "guild"("guildId"));CREATE TABLE "user" ("userId" TEXT NOT NULL UNIQUE, "voiceName" TEXT, "voiceLimit" INTEGER);CREATE TABLE "voiceChannel" ("userId" TEXT NOT NULL, "channelId" TEXT NOT NULL UNIQUE)
DROP TABLE "requestPrepare";CREATE TABLE "tempRoles" ("guildId" TEXT NOT NULL,"roleId" TEXT NOT NULL,"userId" TEXT NOT NULL,"deleteAfter" INTEGER DEFAULT 0,"expireAfter" INTEGER,FOREIGN KEY("guildId") REFERENCES "guild"("guildId"))
ALTER TABLE "guild" ADD "serverLogId" TEXT;ALTER TABLE "guild" ADD "roleLogId" TEXT
ALTER TABLE "requestRole" ADD "discordInvite" TEXT
ALTER TABLE "verify" DROP "instructionText"
CREATE UNIQUE INDEX guildId ON verify(guildId); DROP TABLE "ban"; CREATE TABLE "cases" ("caseId" INTEGER, "type" INTEGER NOT NULL, "targetId" INTEGER NOT NULL, "targetTag" TEXT, "modId" INTEGER NOT NULL, "modTag" TEXT, "guildId" INTEGER NOT NULL, "reason" TEXT, "timeStart" INTEGER NOT NULL, "duration" INTEGER DEFAULT 0, "active" INTEGER NOT NULL DEFAULT 1, PRIMARY KEY("caseId" AUTOINCREMENT)); ALTER TABLE "groupMaster" DROP "isShared"; CREATE TABLE "blacklist" ("guildId" INTEGER NOT NULL, "groupId" INTEGER, "userId" INTEGER NOT NULL, "steam64" INTEGER, "reason" TEXT, "modId" INTEGER NOT NULL); CREATE TABLE "strikeExpire" ("guildId" INTEGER NOT NULL, "userId" INTEGER NOT NULL, "expireAfter" INTEGER NOT NULL, "count" INTEGER NOT NULL DEFAULT 0, "data" TEXT, UNIQUE("guildId","userId")); CREATE TABLE "autopunish" ("guildId" INTEGER NOT NULL, "strike" INTEGER NOT NULL, "actions" INTEGER NOT NULL, "data" TEXT NOT NULL, UNIQUE("guildId","strike")); ALTER TABLE "guild" ADD "strikeExpires"	INTEGER DEFAULT 7
DROP TABLE "verified"; CREATE TABLE "verified" ("discordId" INTEGER NOT NULL UNIQUE, "steam64" INTEGER, "forced" INTEGER DEFAULT 0)
